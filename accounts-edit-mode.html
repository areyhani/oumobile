<!DOCTYPE html> 
<html> 
	<head> 
	<title>Accounts Edit Mode</title> 
	<meta name="viewport" content="width=device-width, initial-scale=1"> 
	<link rel="stylesheet" type="text/css" href="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.css" />
	<link rel="stylesheet" type="text/css" href="css/style.css" /> 
	<script type="text/javascript" src="http://code.jquery.com/jquery-1.7.1.min.js"></script> 
	<script type="text/javascript" src="http://code.jquery.com/mobile/1.0.1/jquery.mobile-1.0.1.min.js"></script>
<style type="text/css">
.ou-back-color{
 background-color: #1C5D93;
 background-image: -moz-linear-gradient(center top , #2276BB, #124065);
    }

</style>
</head> 
<body> 
<div data-role="page" id="accounts">
		<div data-role="header" data-theme="b" style="text-align:center;background-color:#1C5D93; background-image:-moz-linear-gradient(center top , #2276BB, #124065);background-image:-webkit-linear-gradient(center top , #2276BB, #124065);background-image:-webkit-linear-gradient( #2276BB, #124065);">
	
		<a href="#" data-rel="back" data-icon="back">Back</a>
		<h1>Accounts Edit Mode</h1>
		<a href="#" data-icon="gear" class="logout ui-btn-right">Logout</a>
	</div>
	<div data-role="content">
	
	 <div data-role="fieldcontain" class="ui-field-contain ui-body ui-br">
     <fieldset  id="account-list" data-role="listview" data-role="controlgroup" class="ui-corner-all ui-controlgroup ui-controlgroup-vertical" >
		
	</fieldset></div>
	</div>
	
	<div data-position="fixed" data-role="footer" class="ui-footer ui-bar-a ui-footer-fixed fade ui-fixed-overlay" role="contentinfo" style="top: 401px;">

<div data-role="navbar" class="ui-navbar" role="navigation">
<ul class="ui-grid-b">
<li class="ui-block-a"><a data-theme="b" href="super-index.html" class="ui-btn ui-btn-icon-left ui-btn-up-b  ou-back-color"><span class="ui-btn-text">Home</span><span class="ui-icon ui-icon-home" style="left: -25px;"></span></a></li>
<li class="ui-block-b" id="editBtn"><a id="editBtnText"  data-theme="b" href="accounts-edit-mode.html" class="ui-btn ui-btn-icon-left ui-btn-up-b  ou-back-color"><span class="ui-btn-text"   >Delete</span><span class="ui-icon ui-icon-delete" style="left: -25px;"></span></a></li>
<li class="ui-block-c"><a  data-theme="b" href="account-add.html" class="ui-btn ui-btn-icon-left ui-btn-up-b  ou-back-color"><span class="ui-btn-text">Add</span><span class="ui-icon ui-icon-plus " style="left: -25px;"></span></a></li>
</ul>
</div>

</div>
	<script type="text/javascript">
		$('#accounts').on('pageshow', function() {
			$.ajax({
				url: '/accounts/list',
				type: 'get',
				success: function(data) {
					if (data.error) {
						window.location.href = 'super-index.html';
					}
					
					var accounts = $ ('#account-list');
					accounts.empty();
				    var idCount = 0;   
				    
					$.each(data, function(index, value) {
					
						
						   var inputElement = $(document.createElement('input'))
	                             .attr({type: 'checkbox' })
	                             .attr({id: idCount+1 })
	                             .attr({value: value.account });
	                             
	                             
	                     	var inputLabel = $(document.createElement('label'))
	                             .addClass('ui-btn ui-btn-icon-left ui-checkbox-off ui-corner-top ui-btn-up-c')
	                             .attr({for:idCount+1 });
	                                     
	                        var inputSpan = $(document.createElement('span'))
									.addClass('ui-btn-inner ui-corner-top');
									
									
						   var inputText =$(document.createElement('span'))
						    		 .addClass('ui-btn-text')
						     	   	 .text(value.account);
							
							var inputIntermediate = inputElement.after(inputText);
							var inputIntermediate2= inputIntermediate.after(inputLabel);
							var inputIntermediate3= inputIntermediate2.after(inputSpan);
							accounts.append(inputIntermediate3);
					
						//var count = $(document.createElement('span'))
						//	.addClass('ui-li-count')
						//	.text('Pages: ' + value.page_count);	
							
					 
					 	 // var a = $(document.createElement('a'))
							//.attr({ href: 'account.html?account=' + value.account })
						//	.text(value.account);
						
						
						
							
						//a.append(count);
						//var li = $(document.createElement('li')).append(a);
						//accounts.append(li);
						idCount++;
					});
					accounts.listview("refresh");
				}
			});
		});
		
		

		
		
		$('.logout').click(function() {
			$.ajax({
				url: '/authentication/logout',
				type: 'post',
				success: function(data) {
					window.location.href = 'super-index.html';
				}
			});
		});
		
		$('#editBtn').click(function() {
		 window.location.href='accounts.html';
		
		});
		
	</script> 




</div>
</body>
</html>